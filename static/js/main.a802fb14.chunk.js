(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[0],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),s=n(24),i=n(25),o=n(27),c=n(26),a=n(1),u=n.n(a),l=n(10),j=n(11),d=n(0),b=function(e){return{isAuth:e.auth.isAuth}},p=function(e){var t=function(t){Object(o.a)(a,t);var n=Object(c.a)(a);function a(){return Object(s.a)(this,a),n.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.isAuth?Object(d.jsx)(e,Object(r.a)({},this.props)):Object(d.jsx)(l.a,{to:"/login"})}}]),a}(u.a.Component);return Object(j.b)(b)(t)}},127:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(47),s=n(3),i="SEND-MESSAGE",o={messages:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"},{id:4,message:"Hi"}],dialogs:[{id:1,name:"Eugene"},{id:2,name:"Andrey"},{id:3,name:"Viktor"},{id:4,name:"Vasiliy"},{id:5,name:"Ivan"},{id:6,name:"Timofey"}]},c=function(e){return{type:i,newMessageText:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:var n=t.newMessageText;return Object(s.a)(Object(s.a)({},e),{},{newMessageText:"",messages:[].concat(Object(r.a)(e.messages),[{id:5,message:n}])});default:return e}}},135:function(e,t,n){e.exports={item:"Post_item__3RMMp"}},15:function(e,t,n){e.exports={nav:"Navbar_nav__1VeXj",item:"Navbar_item__1ZIrs",activeLink:"Navbar_activeLink__vAJoQ"}},166:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,294)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),i(e),o(e)}))},s=n(66),i=n.n(s),o=n(24),c=n(25),a=n(27),u=n(26),l=(n(166),n(15)),j=n.n(l),d=n(12),b=n(0),p=function(){return Object(b.jsxs)("nav",{className:j.a.nav,children:[Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/profile",activeClassName:j.a.activeLink,children:"Profile"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/dialogs",activeClassName:j.a.activeLink,children:"Messages"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/users",activeClassName:j.a.activeLink,children:"Users"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/news",activeClassName:j.a.activeLink,children:"News"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/music",activeClassName:j.a.activeLink,children:"Music"})}),Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(d.b,{to:"/settings",activeClassName:j.a.activeLink,children:"Settings"})})]})},f=(n(172),function(){return Object(b.jsx)("div",{children:"Music"})}),h=(n(173),function(){return Object(b.jsx)("div",{children:"News"})}),O=(n(174),function(){return Object(b.jsx)("div",{children:"Settings"})}),g=n(10),m=n(1),x=n.n(m),v=n(11),P=n(19),w=n.n(P),_=n(38),C=n(47),S=n(3),y=n(132).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"9cbc330a-f32b-4dd5-96a5-b2117797aadc"}}),k=function(e,t){return y.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},I=function(e){return y.post("follow/".concat(e)).then((function(e){return e.data}))},U=function(e){return y.delete("follow/".concat(e)).then((function(e){return e.data}))},N=function(e){return E.userProfile(e)},E={userProfile:function(e){return y.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return y.get("profile/status/".concat(e))},updateStatus:function(e){return y.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),y.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return y.put("profile",e)}},F=function(){return y.get("auth/me").then((function(e){return e.data}))},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return y.post("auth/login",{email:e,password:t,rememberMe:n})},A=function(){return y.delete("auth/login")},L=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(S.a)(Object(S.a)({},e),r):e}))},M="FOLLOW",z="UNFOLLOW",D="SET-USERS",R="SET-CURRENT-PAGE",G="SET-TOTAL-USERS-COUNT",B="TOGGLE-IS-FETCHING",H="TOGGLE-IS-FOLLOWING-PROGRESS",J={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},V=function(e){return{type:M,userId:e}},W=function(e){return{type:z,userId:e}},q=function(e){return{type:R,currentPage:e}},K=function(e){return{type:B,isFetching:e}},X=function(e,t){return{type:H,isFetching:e,userId:t}},Y=function(){var e=Object(_.a)(w.a.mark((function e(t,n,r,s){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(s(n)),t(X(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(S.a)(Object(S.a)({},e),{},{users:L(e.users,t.userId,"id",{followed:!0})});case z:return Object(S.a)(Object(S.a)({},e),{},{users:L(e.users,t.userId,"id",{followed:!1})});case D:return Object(S.a)(Object(S.a)({},e),{},{users:t.users});case R:return Object(S.a)(Object(S.a)({},e),{},{currentPage:t.currentPage});case G:return Object(S.a)(Object(S.a)({},e),{},{totalUsersCount:t.totalUsersCount});case B:return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});case H:return Object(S.a)(Object(S.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(C.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});default:return e}},Q=n(70),$=n(37),ee=n(39),te=n.n(ee),ne=function(e){for(var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,s=e.onPageChanged,i=e.portionSize,o=Math.ceil(t/n),c=[],a=1;a<=o;a++)c.push(a);var u=Math.ceil(o/i),l=Object(m.useState)(1),j=Object($.a)(l,2),d=j[0],p=j[1],f=(d-1)*i+1,h=d*i;return Object(b.jsxs)("div",{className:te.a.paginator,children:[d>1&&Object(b.jsx)("span",{className:te.a.arrow,onClick:function(){p(d-1)},children:"<<"}),Object(b.jsx)("div",{children:c.filter((function(e){return e>=f&&e<=h})).map((function(e){return Object(b.jsx)("span",{className:"".concat(r===e&&te.a.selectedPage," ").concat(te.a.pageCursor," ").concat(te.a.pageList),onClick:function(t){s(e)},children:"".concat(e," ")},e)}))}),u>d&&Object(b.jsx)("span",{className:te.a.arrow,onClick:function(){p(d+1)},children:">>"})]})},re=n(42),se=n.n(re),ie=n.p+"static/media/user-male.3759889a.png",oe=function(e){var t=e.unfollowUsers,n=e.followUsers,r=e.followingInProgress,s=e.user,i=e.key;return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:Object(b.jsx)(d.b,{to:"./profile/"+s.id,children:Object(b.jsx)("img",{src:null!=s.photos.small?s.photos.small:ie,className:se.a.userPhoto})})}),Object(b.jsx)("div",{children:s.followed?Object(b.jsx)("button",{disabled:r.some((function(e){return e===s.id})),onClick:function(){t(s.id)},children:"Unfollow"}):Object(b.jsx)("button",{disabled:r.some((function(e){return e===s.id})),onClick:function(){n(s.id)},children:"Follow"})})]}),Object(b.jsxs)("span",{children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:s.name}),Object(b.jsx)("div",{children:s.status})]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{children:"u.location.city"}),Object(b.jsx)("div",{children:"u.location.country"})]})]})]},i)})},ce=function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,s=e.onPageChanged,i=e.users,o=Object(Q.a)(e,["totalUsersCount","pageSize","currentPage","onPageChanged","users"]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(ne,{onPageChanged:s,totalUsersCount:t,pageSize:n,currentPage:r,portionSize:20}),i.map((function(e){return Object(b.jsx)(oe,{user:e,followingInProgress:o.followingInProgress,unfollowUsers:o.unfollowUsers,followUsers:o.followUsers},e.id)}))]})},ae=n.p+"static/media/circles.ff85086e.svg",ue=function(e){return Object(b.jsx)("div",{className:se.a.loader,children:Object(b.jsx)("img",{src:ae})})},le=n(106),je=n(8),de=n(133),be=Object(de.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),pe=function(e){return e.usersPage.pageSize},fe=function(e){return e.usersPage.totalUsersCount},he=function(e){return e.usersPage.currentPage},Oe=function(e){return e.usersPage.isFetching},ge=function(e){return e.usersPage.followingInProgress},me=function(e){Object(a.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.requestUsers(t,e.props.pageSize)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:se.a.preloader,children:this.props.isFetching?Object(b.jsx)(ue,{}):null}),Object(b.jsx)(ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,followingInProgress:this.props.followingInProgress,followUsers:this.props.followUsers,unfollowUsers:this.props.unfollowUsers})]})}}]),n}(x.a.Component),xe=Object(je.d)(Object(v.b)((function(e){return{users:be(e),pageSize:pe(e),totalUsersCount:fe(e),currentPage:he(e),isFetching:Oe(e),followingInProgress:ge(e)}}),{follow:V,unFollow:W,followUsers:function(e){return function(){var t=Object(_.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y(n,e,I,V);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowUsers:function(e){return function(){var t=Object(_.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y(n,e,U,W);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},requestUsers:function(e,t){return function(){var n=Object(_.a)(w.a.mark((function n(r){var s;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(K(!0)),r(q(e)),n.next=4,k(e,t);case 4:s=n.sent,r(K(!1)),r((o=s.items,{type:D,users:o})),r((i=s.totalCount,{type:G,totalUsersCount:i}));case 8:case"end":return n.stop()}var i,o}),n)})));return function(e){return n.apply(this,arguments)}}()},toggleFollowingProgress:X,setCurrentPage:q}),le.a)(me),ve=n(92),Pe=n.n(ve),we=function(e){var t=Object(m.useState)(!1),n=Object($.a)(t,2),r=n[0],s=n[1],i=Object(m.useState)(e.status),o=Object($.a)(i,2),c=o[0],a=o[1];Object(m.useEffect)((function(){a(e.status)}),[e.status]);return Object(b.jsxs)("div",{children:[!r&&Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Status"}),":",Object(b.jsx)("span",{onDoubleClick:function(){s(!0)},children:e.status||"------"})]}),r&&Object(b.jsx)("div",{children:Object(b.jsx)("input",{onChange:function(e){a(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateUserStatus(c)},value:c})})]})},_e=n(128),Ce=n(129),Se=n(35),ye=Object(Se.a)("input"),ke=Object(Se.a)("textarea"),Ie=Object(Ce.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit;e.profile;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"FullName"}),":",Object(b.jsx)(_e.a,{component:ye,type:"text",name:"fullName",placeholder:"Full Name"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Looking for a job"}),":",Object(b.jsx)(_e.a,{component:ye,type:"checkbox",name:"lookingForAJob"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"My professional skills"}),":",Object(b.jsxs)("div",{children:[Object(b.jsx)(_e.a,{component:ke,name:"lookingForAJobDescription"})," "]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"About me"}),":",Object(b.jsxs)("div",{children:[Object(b.jsx)(_e.a,{component:ke,name:"aboutMe"})," "]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"Save"})})]})})),Ue=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(b.jsxs)("div",{children:[n&&Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:r,children:"Edit"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"FullName"}),": ",t.fullName]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Looking for a job"}),":",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(e){return Object(b.jsx)(Ne,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},Ne=function(e){var t=e.contactTitle,n=e.contactValue;return Object(b.jsxs)("div",{className:Pe.a.contact,children:[Object(b.jsx)("b",{children:t}),":",n,";"]})},Ee=function(e){var t=Object(m.useState)(!1),n=Object($.a)(t,2),r=n[0],s=n[1];if(!e.profile)return Object(b.jsx)(ue,{});return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:Pe.a.avatar,children:[Object(b.jsx)("img",{src:e.profile.photos.large||ie,alt:"user photo"}),e.isOwner&&Object(b.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}}),Object(b.jsx)(we,{status:e.status,updateUserStatus:e.updateUserStatus}),r?Object(b.jsx)(Ie,{onSubmit:function(t){e.saveProfile(t)},profile:e.profile}):Object(b.jsx)(Ue,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){s(!0)}})]})})},Fe="ADD-POST",Te="SET-USER-PROFILE",Ae="SET-USER-STATUS",Le="DELETE-POST",Me="SAVE_PHOTO_SUCCESS",ze={posts:[{id:1,message:"Hi, how are you",likeCount:"100"},{id:2,message:"It's my first post",likeCount:"150"}],profile:null,status:""},De=function(e){return{type:Ae,status:e}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:var n={id:3,message:t.addNewPost,likeCount:0};return Object(S.a)(Object(S.a)({},e),{},{posts:[].concat(Object(C.a)(e.posts),[n])});case Te:return Object(S.a)(Object(S.a)({},e),{},{profile:t.profile});case Ae:return Object(S.a)(Object(S.a)({},e),{},{status:t.status});case Le:return Object(S.a)(Object(S.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case Me:return Object(S.a)(Object(S.a)({},e),{},{profile:Object(S.a)(Object(S.a)({},e.profile),{},{photos:t.photos})});default:return e}},Ge=n(95),Be=n.n(Ge),He=n(135),Je=n.n(He),Ve=function(e){return Object(b.jsxs)("div",{className:Je.a.item,children:[Object(b.jsx)("img",{src:"http://www.youloveit.ru/uploads/posts/2020-04/1586360146_youloveit_ru_bill_gravity_falls_na_avu09.jpg"}),e.message,Object(b.jsx)("div",{children:Object(b.jsxs)("span",{children:["Like ",e.likeCount]})})]})},We=n(46),qe=Object(We.a)(10),Ke=Object(Se.a)("textarea"),Xe=Object(Ce.a)({form:"newPostForm"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(_e.a,{component:Ke,name:"newPostText",placeholder:"Add Your post",validate:[We.b,qe]})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"Add Post"})})]})})),Ye=function(e){var t=e.profilePage.posts.map((function(e){return Object(b.jsx)(Ve,{message:e.message,likeCount:e.likeCount})}));return Object(b.jsxs)("div",{className:Be.a.postBlock,children:[Object(b.jsx)("h3",{children:"My Posts"}),Object(b.jsx)("div",{children:Object(b.jsx)(Xe,{onSubmit:function(t){e.addPost(t.newPostText)}})}),Object(b.jsx)("div",{className:Be.a.posts,children:t})]})},Ze=Object(v.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{addPost:function(t){e(function(e){return{type:Fe,addNewPost:e}}(t))}}}))(Ye),Qe=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(Ee,{isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,saveProfile:e.saveProfile,status:e.status,updateUserStatus:e.updateUserStatus}),Object(b.jsx)(Ze,{})]})},$e=function(e){Object(a.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(b.jsx)(Qe,Object(S.a)(Object(S.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserstatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto}))}}]),n}(x.a.Component),et=Object(je.d)(Object(v.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(t){N(e).then((function(e){t({type:Te,profile:e})}))}},getUserStatus:function(e){return function(){var t=Object(_.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getStatus(e);case 2:r=t.sent,n(De(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(t){E.updateStatus(e).then((function(n){0===n.data.resultCode&&t(De(e))}))}},savePhoto:function(e){return function(t){E.savePhoto(e).then((function(e){var n;0===e.data.resultCode&&t((n=e.data.data.photos,{type:Me,photos:n}))}))}},saveProfile:function(e){return function(t){E.saveProfile(e).then((function(e){0===e.data.resultCode&&console.log(e.data.resultCode)}))}}}),g.f)($e),tt=n(96),nt=n.n(tt),rt=function(e){return Object(b.jsxs)("header",{className:nt.a.header,children:[Object(b.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/BMW_logo_%28gray%29.svg/1024px-BMW_logo_%28gray%29.svg.png"}),Object(b.jsx)("div",{className:nt.a.loginBlock,children:e.isAuth?Object(b.jsxs)("div",{children:[e.login," ",Object(b.jsx)("button",{onClick:e.logout,children:"LogOut"})," "]}):Object(b.jsx)(d.b,{to:"/login",children:"LogIn"})})]})},st=n(34),it="SET-USER-DATA",ot="TOGGLE-IS-FETCHING",ct={userId:null,email:null,login:null,isFetching:!1,isAuth:!1},at=function(e,t,n,r){return{type:it,payload:{userId:e,email:t,login:n,isAuth:r}}},ut=function(e){return{type:ot,isFetching:e}},lt=function(){return function(e){return e(ut(!0)),F().then((function(t){if(e(ut(!1)),0===t.resultCode){var n=t.data,r=n.id,s=n.email,i=n.login;e(at(r,s,i,!0))}}))}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:return Object(S.a)(Object(S.a)({},e),t.payload);case ot:return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});default:return e}},dt=function(e){Object(a.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{children:this.props.isFetching?Object(b.jsx)(ue,{}):null}),Object(b.jsx)(rt,Object(S.a)({},this.props))]})}}]),n}(x.a.Component),bt=Object(v.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(e){A().then((function(t){0===t.data.resultCode&&e(at(null,null,null,!1))}))}}})(dt),pt=n(55),ft=n.n(pt),ht=Object(Se.a)("input"),Ot=Object(Ce.a)({form:"login"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(_e.a,{placeholder:"Email",name:"email",component:ht,validate:[We.b]})}),Object(b.jsx)("div",{children:Object(b.jsx)(_e.a,{placeholder:"Password",name:"password",type:"password",component:ht,validate:[We.b]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(_e.a,{component:ht,name:"rememberMe",type:"checkbox"}),"Remember me"]}),e.error&&Object(b.jsx)("div",{className:ft.a.commonError,children:e.error}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"LogIn"})})]})})),gt=Object(v.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userid}}),{login:function(e,t,n){return function(r){T(e,t,n).then((function(e){if(0===e.data.resultCode)r(lt());else{var t=e.data.messages.length>0?e.data.messages[0]:"12";r(Object(st.a)("login",{_error:t}))}}))}}})((function(e){return e.isAuth?Object(b.jsx)(g.a,{to:"/profile"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsx)(Ot,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),mt="INITIALIZED-SUCCESS",xt={initialized:!1},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(S.a)(Object(S.a)({},e),{},{initialized:!0});default:return e}},Pt=n(127),wt=n(136),_t=n(130),Ct=Object(je.c)({profilePage:Re,dialogPage:Pt.a,usersPage:Z,auth:jt,form:_t.a,app:vt}),St=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||je.d,yt=Object(je.e)(Ct,St(Object(je.a)(wt.a)));window.store=yt;var kt=yt,It=x.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),Ut=function(e){Object(a.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(b.jsxs)("div",{className:"app-wrapper",children:[Object(b.jsx)(bt,{}),Object(b.jsx)(p,{}),Object(b.jsxs)("div",{className:"app-wrapper-content",children:[Object(b.jsx)(g.b,{path:"/profile/:userId?",render:function(){return Object(b.jsx)(et,{})}}),Object(b.jsx)(g.b,{path:"/dialogs",render:function(){return Object(b.jsx)(x.a.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading"}),children:Object(b.jsx)(It,{})})}}),Object(b.jsx)(g.b,{path:"/users",render:function(){return Object(b.jsx)(xe,{})}}),Object(b.jsx)(g.b,{path:"/news",component:h}),Object(b.jsx)(g.b,{path:"/music",component:f}),Object(b.jsx)(g.b,{path:"/settings",component:O}),Object(b.jsx)(g.b,{path:"/login",component:gt})]})]}):Object(b.jsx)(ue,{})}}]),n}(m.Component),Nt=Object(je.d)(g.f,Object(v.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(lt());Promise.all([t]).then((function(){e({type:mt})}))}}}))(Ut),Et=function(e){return Object(b.jsx)(d.a,{children:Object(b.jsx)(v.a,{store:kt,children:Object(b.jsx)(Nt,{})})})};i.a.render(Object(b.jsx)(Et,{}),document.getElementById("root")),r()},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),s=n(70),i=(n(1),n(55)),o=n.n(i),c=n(0),a=function(e){return function(t){var n=t.input,i=t.meta,a=Object(s.a)(t,["input","meta"]),u=i.touched&&i.error;return Object(c.jsxs)("div",{className:o.a.formControl+" "+(u?o.a.error:""),children:[Object(c.jsx)("div",{children:Object(c.jsx)(e,Object(r.a)(Object(r.a)({},n),a))}),u&&Object(c.jsx)("span",{children:i.error})]})}}},39:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__3oChw",pageCursor:"Paginator_pageCursor__6bCxl",pageList:"Paginator_pageList__f29Og",paginator:"Paginator_paginator__1m67L",arrow:"Paginator_arrow__1lJRa"}},42:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__1wxDz",preloader:"Users_preloader__1QMWM"}},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var r=function(e){if(!e)return"Field is required"},s=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},55:function(e,t,n){e.exports={formControl:"FormControls_formControl__2p8Kn",error:"FormControls_error__1ebMZ",commonError:"FormControls_commonError__oIuDK"}},92:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__2nWRP",headImg:"ProfileInfo_headImg__29OIH",contact:"ProfileInfo_contact__2guGu"}},95:function(e,t,n){e.exports={postBlock:"MyPosts_postBlock__1epCz",posts:"MyPosts_posts__8eKsO"}},96:function(e,t,n){e.exports={header:"Header_header__2866M",loginBlock:"Header_loginBlock__22MoV"}}},[[292,1,2]]]);
//# sourceMappingURL=main.a802fb14.chunk.js.map